<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>분실물 정보</title>
    <link rel="stylesheet" type="text/css" href="popup.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap');
    </style>
</head>

<body>
    <div>
        <form onsubmit="return false;", method="post">
            <input id='pinName' onkeyup="readData()"/>
            <button id='btn'>게시</button>
        </form>
    </div>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js'
        import { getFirestore, collection, addDoc } from 'https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore.js'
        const firebaseConfig = {
            apiKey: "AIzaSyAxg_K4mtgZj0x_uzJA_pJpt7hnfiR4Wz0",
            authDomain: "lostitems-9aef1.firebaseapp.com",
            projectId: "lostitems-9aef1",
            storageBucket: "lostitems-9aef1.appspot.com",
            messagingSenderId: "811773546894",
            appId: "1:811773546894:web:34e7acff3cc07e3eaa94df",
            measurementId: "G-598RBQ2EYQ"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        var pinName = null;

        function readData() {
            var pinName = document.getElementById('pinName');
            console.log('successfully read data:', pinName.value);
            upload();
        }

        function upload() {
            try {
            const docRef = addDoc(collection(db, "pinName"), {
                name: pinName,
            });
            console.log("Document written with ID: ", docRef.id);
            } catch (e) {
            console.error("Error adding document: ", e);
            }
        }

    </script>
</body>

</html>
